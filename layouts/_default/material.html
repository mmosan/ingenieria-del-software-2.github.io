{{ define "main" }}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Material de Referencia</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: {
                    primary: {
                        50: '#f8fafc',
                        100: '#f1f5f9',
                        200: '#e2e8f0',
                        300: '#cbd5e1',
                        400: '#94a3b8',
                        500: '#64748b',
                        600: '#475569',
                        700: '#334155',
                        800: '#1e293b',
                        900: '#0f172a',
                    },
                    accent: {
                        50: '#f0f9ff',
                        100: '#e0f7ff',
                        200: '#bae6fd',
                        300: '#7dd3fc',
                        400: '#38bdf8',
                        500: '#0ea5e9',
                        600: '#0284c7',
                        700: '#0369a1',
                        800: '#075985',
                        900: '#0c4a6e',
                    },
                    gray: {
                        50: '#f9fafb',
                        100: '#f3f4f6',
                        200: '#e5e7eb',
                        300: '#d1d5db',
                        400: '#9ca3af',
                        500: '#6b7280',
                        600: '#4b5563',
                        700: '#374151',
                        800: '#1f2937',
                        900: '#111827',
                        950: '#030712'
                    }
                }
            }
        }
    }
</script>
</head>
<body class="bg-gray-50 min-h-screen text-gray-900 dark:text-gray-100">
  {{ partial "sidebar.html" (dict "context" . "disableSidebar" true) }}

  <!-- Main Content -->
  <main class="max-w-3xl mx-auto px-4 py-8 space-y-4">
    {{ range .Site.Data.material.sections }}

    <section 
      class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-md transition-shadow overflow-hidden"
    >
      <details class="group">
        <!-- Summary Header -->
        <summary 
          class="p-6 cursor-pointer flex items-start gap-4 list-none hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
        >
          <!-- Emoji or fallback -->
          <span class="text-3xl flex-shrink-0">
            {{ .emoji | default "ðŸ“˜" }}
          </span>

          <div class="flex-grow">
            <!-- Title -->
            <h3 
              class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2 transition-colors"
            >
              {{ .title }}
            </h3>

            <!-- Quick Topics Preview -->
            <div class="flex flex-wrap gap-2">
              {{ range (first 2 .topics) }}
              <span 
                class="inline-flex items-center px-3 py-1 rounded-full text-sm 
                       bg-gray-100 dark:bg-gray-700 
                       text-gray-700 dark:text-gray-200 
                       transition-colors"
              >
                {{ . }}
              </span>
              {{ end }}

              <!-- If more than 2 topics, show a +N badge -->
              {{ if gt (len .topics) 2 }}
              <span 
                class="inline-flex items-center px-3 py-1 rounded-full text-sm 
                       bg-gray-100 dark:bg-gray-700 
                       text-gray-700 dark:text-gray-200
                       transition-colors"
              >
                +{{ sub (len .topics) 2 }} more
              </span>
              {{ end }}
            </div>
          </div>

          <!-- Chevron Icon -->
          <div 
            class="ml-4 text-gray-400 dark:text-gray-300 group-open:rotate-180 transition-transform duration-300"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"/>
            </svg>
          </div>
        </summary>

        <!-- Expanded Content -->
        <div class="px-6 pb-6 pt-2 border-t border-gray-100 dark:border-gray-700 space-y-4 transition-colors">
          <!-- All Topics -->
          <div>
            <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
              Temas:
            </h4>
            <div class="flex flex-wrap gap-2">
              {{ range .topics }}
              <span 
                class="inline-flex items-center px-3 py-1 rounded-full text-sm 
                       bg-gray-100 dark:bg-gray-700 
                       text-gray-700 dark:text-gray-200 
                       transition-colors"
              >
                {{ . }}
              </span>
              {{ end }}
            </div>
          </div>

          <!-- Resources / Links -->
          {{ if .links }}
            <div>
              <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
                Recursos:
              </h4>
              <div class="space-y-2">
                {{ range .links }}
                <a 
                  href="{{ . }}" 
                  target="_blank"
                  class="flex items-center gap-2 text-sm 
                         text-blue-600 dark:text-blue-400 
                         hover:text-blue-700 dark:hover:text-blue-300 
                         transition-colors"
                >
                  <!-- External link icon -->
                  <svg class="w-4 h-4" fill="none" stroke="currentColor"
                       viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          stroke-width="2"
                          d="M13 7h6m0 0v6m0-6L10 16"/>
                  </svg>
                  {{ . }}
                </a>
                {{ end }}
              </div>
            </div>
          {{ end }}
        </div>
      </details>
    </section>
    {{ end }}
  </main>

</body>
</html>
{{ end }}